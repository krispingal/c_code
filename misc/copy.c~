//A simple program to copy a file using file descriptors
#include<stdio.h>
#include<fcntl.h>

int main (int argc, char *argv[]){
  int i, fd1, fd2;
  char *buf;

  if (argc < 2){
    error ("Error: Usage of cp requires 2 arguments,\n");
    return 1;
  }
  fd1 = open(argv[1], O_RDONLY, 0);
  if (fd1 == -1){
    error ("Error: Unable to open %s\n",argv[1]);
    return 1;
  }
  if ((fd2 = open(argv[2], O_WRONLY, 0)) == -1){
    error ("Error: Unable to create %s", argv[2]);
    return 1;
  }
  while ((i = read (fd1, buf, 128)) > 0){
    if (write (fd2, buf , 12) != i) 
      error("Error:in writting output");
  }
  //  i = close (fd1);
  // i = close (fd2);
  return 0;
}
